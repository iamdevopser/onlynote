# Redis Service Dockerfile
FROM redis:7-alpine

# Copy custom Redis configuration if it exists
RUN mkdir -p /usr/local/etc/redis
RUN if [ -f "docker/redis/redis.conf" ]; then \
    cp docker/redis/redis.conf /usr/local/etc/redis/redis.conf; \
    else \
    echo "# Redis Configuration" > /usr/local/etc/redis/redis.conf; \
    fi

# Enable AOF persistence
CMD ["redis-server", "--appendonly", "yes"]

# Expose Redis port
EXPOSE 6379

